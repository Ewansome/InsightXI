# outputs.tf

This file defines values that Terraform outputs after applying. These are useful for:
- Getting information you need (like the ALB URL)
- Passing values to other Terraform configurations
- Scripting and automation

## Code Breakdown

```hcl
output "alb_dns_name" {
  description = "DNS name of the Application Load Balancer"
  value       = aws_lb.main.dns_name
}
```

**What:** The URL to access your application.

**Why:**
- After `terraform apply`, you'll see something like:
  ```
  alb_dns_name = "insightxi-dev-alb-123456789.eu-west-2.elb.amazonaws.com"
  ```
- You can then access your app at `http://<alb_dns_name>/sync/leagues`
- This DNS name is auto-generated by AWS

---

```hcl
output "rds_endpoint" {
  description = "RDS instance endpoint"
  value       = aws_db_instance.main.endpoint
}
```

**What:** The database connection endpoint.

**Why:**
- Format: `insightxi-dev-db.abc123.eu-west-2.rds.amazonaws.com:3306`
- Useful for debugging or connecting directly (if you add your IP to the security group)
- The ECS tasks use this internally via the `DB_HOST` environment variable

---

```hcl
output "ecs_cluster_name" {
  description = "Name of the ECS cluster"
  value       = aws_ecs_cluster.main.name
}
```

**What:** The ECS cluster name.

**Why:**
- Needed for ECS CLI commands:
  ```bash
  aws ecs list-services --cluster insightxi-dev-cluster
  aws ecs describe-services --cluster insightxi-dev-cluster --services insightxi-dev-sportmonks
  ```
- Useful for the CD pipeline in Phase 4 (deploying new images)

---

```hcl
output "vpc_id" {
  description = "ID of the VPC"
  value       = aws_vpc.main.id
}
```

**What:** The VPC identifier.

**Why:**
- Format: `vpc-0abc123def456`
- Useful if you need to add more resources to the same VPC later
- Can be used in other Terraform configurations with `data "aws_vpc"`

## Accessing Outputs

After running `terraform apply`:

```bash
# See all outputs
terraform output

# Get a specific output
terraform output alb_dns_name

# Get output as raw value (no quotes) - useful for scripts
terraform output -raw alb_dns_name
```

## Adding More Outputs

You might want to add:

```hcl
output "ecr_repository_urls" {
  description = "ECR repository URLs for each service"
  value = {
    sportmonks   = data.aws_ecr_repository.sportmonks.repository_url
    database     = data.aws_ecr_repository.database.repository_url
    orchestrator = data.aws_ecr_repository.orchestrator.repository_url
  }
}

output "private_subnet_ids" {
  description = "Private subnet IDs"
  value       = aws_subnet.private[*].id
}

output "ecs_task_security_group_id" {
  description = "Security group ID for ECS tasks"
  value       = aws_security_group.ecs_tasks.id
}
```

These would be useful for the CD pipeline or adding new services.
